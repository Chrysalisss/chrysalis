/**
 * Chrysalis v0.9.0-β
 * Casper Søkol, 2018
 * Distributed under the MIT license
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Chrysalis=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(t){return i(t)||a(t)||c()}function i(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}return{createElement:function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return null===e&&(e={}),{type:t,props:e,children:o}},render:function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=o?function(t){return o.appendChild(t)}:function(t){return t};if("string"==typeof n||"number"==typeof n)return i(document.createTextNode(n));if("boolean"==typeof n||null===n)return i(document.createTextNode(""));if("object"==t(n)&&"function"==typeof n.type)return Component.render(n,o);if("object"==t(n)&&"string"==typeof n.type){var a=i(document.createElement(n.type)),c=!0,p=!1,u=void 0;try{for(var l,s=(f=[]).concat.apply(f,r(n.children))[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var f;e(l.value,a)}}catch(t){p=!0,u=t}finally{try{c||null==s.return||s.return()}finally{if(p)throw u}}for(var y in n.props)setAttribute(a,y,n.props[y]);return a}},setAttribute:function(e,n,o){if("function"==typeof o&&n.startsWith("on")){var r=n.slice(2).toLowerCase();e.__gooactHandlers=e.__gooactHandlers||{},e.removeEventListener(r,e.__gooactHandlers[r]),e.__gooactHandlers[r]=o,e.addEventListener(r,e.__gooactHandlers[r])}"checked"!=n&&"value"!=n&&"className"!=n||(e[n]=o),"style"==n&&"object"==t(o)&&Object.assign(e.style,o),"ref"==n&&"function"==typeof o&&o(e),"key"==n&&(e.__gooactKey=o),"object"!=t(o)&&"function"!=typeof o&&e.setAttribute(n,o)},patch:function e(n,o){arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.parentNode;var i=parent?function(t){return parent.replaceChild(t,n)&&t}:function(t){return t};if("object"==t(o)&&"function"==typeof o.type)return Component.patch(n,o,parent);if("object"!=t(o)&&n instanceof Text)return n.textContent!=o?i(render(o,parent)):n;if("object"==t(o)&&n instanceof Text)return i(render(o,parent));if("object"==t(o)&&n.nodeName!=o.type.toUpperCase())return i(render(o,parent));if("object"==t(o)&&n.nodeName==o.type.toUpperCase()){var a,c,p={},u=document.activeElement;(a=[]).concat.apply(a,r(n.childNodes)).map(function(t,e){var n=t.__gooactKey||"__index_".concat(e);p[n]=t}),(c=[]).concat.apply(c,r(o.children)).map(function(t,o){var r=t.props&&t.props.key||"__index_".concat(o);n.appendChild(p[r]?e(p[r],t):render(t,n)),delete p[r]});for(var l in p){var s=p[l].__gooactInstance;s&&s.componentWillUnmount(),p[l].remove()}var f=!0,y=!1,d=void 0;try{for(var h,v=n.attributes[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var m=h.value;n.removeAttribute(m.name)}}catch(t){y=!0,d=t}finally{try{f||null==v.return||v.return()}finally{if(y)throw d}}for(var b in o.props)setAttribute(n,b,o.props[b]);return u.focus(),n}},Component:function(){function t(n){e(this,t),this.props=n||{},this.state=null}return o(t,[{key:"setState",value:function(t){if(this.base&&this.shouldComponentUpdate(this.props,t)){var e=this.state;this.componentWillUpdate(this.props,t),this.state=t,patch(this.base,this.render()),this.componentDidUpdate(this.props,e)}else this.state=t}},{key:"shouldComponentUpdate",value:function(t,e){return t!=this.props||e!=this.state}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentWillUpdate",value:function(t,e){}},{key:"componentDidUpdate",value:function(t,e){}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}],[{key:"render",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=Object.assign({},e.props,{children:e.children});if(t.isPrototypeOf(e.type)){var r=new e.type(o);return r.componentWillMount(),r.base=render(r.render(),n),r.base.__gooactInstance=r,r.base.__gooactKey=e.props.key,r.componentDidMount(),r.base}return render(e.type(o),n)})},{key:"patch",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.parentNode,r=Object.assign({},n.props,{children:n.children});if(e.__gooactInstance&&e.__gooactInstance.constructor==n.type)return e.__gooactInstance.componentWillReceiveProps(r),e.__gooactInstance.props=r,patch(e,e.__gooactInstance.render(),o);if(t.isPrototypeOf(n.type)){var i=t.render(n,o);return o?o.replaceChild(i,e)&&i:i}return t.isPrototypeOf(n.type)?void 0:patch(e,n.type(r),o)})}]),t}()}});
