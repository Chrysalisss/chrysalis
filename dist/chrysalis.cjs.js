/**
 * Chrysalis v1.0.3-β
 * Casper Søkol, 2019
 * Distributed under the MIT license
 */

Object.defineProperty(exports,"__esModule",{value:!0});var element,oldNode,className="className",CLASS="class",doc=document,NULL=null,EMPTY_OBJ={},FUNCTION="function";function isNew(e,t){for(var r in e)if(e[r]!==t[r])return!0;for(var r in t)if(e[r]!==t[r])return!0}function isTextNode(e){return"object"!=typeof e}function getKey(e){if(e&&(e=e.t))return e.key}function removeElement$1(e,t,r){r.onremove&&r.onremove(),e.removeChild(t),r.ondestroy&&r.ondestroy()}function clone(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function h(e,t){for(var r,n=[],o=[],a=arguments.length;a-- >2;)n.push(arguments[a]);for(;n.length>0;)if(Array.isArray(r=n.pop()))for(var i=r.length;i-- >0;)n.push(r[i]);else!1===r||!0===r||r==NULL||o.push(r);return t=t||{},typeof e==FUNCTION?(t.n=o,e(t)):{e:e,t:t,n:o}}function eventProxy(e){return e.currentTarget.events[e.e](e)}function updateProps(e,t,r,n){for(var o in clone(t,r)){var a=t[o],i=r[o];if("key"==(o=n?o==className?CLASS:o:o==CLASS?className:o));else if("style"==o)for(var s in merge(a,i))(a||EMPTY_OBJ)[s]==(i||EMPTY_OBJ)[s]||e.style.setProperty("-"==s[0]&&"-"==s[1]?s:s.replace(/[A-Z]/g,"-$&"),a&&s in a?"number"==typeof a[s]?a[s]+"px":a[s]:"");else"o"===o[0]&&"n"===o[1]?((e.events||(e.events={}))[o=o.slice(2).toLowerCase()]=a)?i||e.addEventListener(o,eventProxy):e.removeEventListener(o,eventProxy):"ref"==o?typeof a==FUNCTION?a(e):a.current=e:"dangerouslySetInnerHTML"==o?e.innerHTML=a.__html:!n&&"list"!=o&&o in e?e[o]=a==NULL?"":a:a==NULL||!1===a?e.removeAttribute(o):e.setAttribute(o,a)}}function createElement(e,t,r){if(""==e.e&&(e=e.n[0]),isTextNode(e))return doc.createTextNode(e);if(e.e.render)return e.e.oncreate&&t.push(e.e.oncreate),e.t.n=e.n,o(e.e,e.t),e.e.oninit&&e.e.oninit(),e.e.k;var n=(r=r||"svg"==e.e)?doc.createElementNS("http://www.w3.org/2000/svg",e.e):doc.createElement(e.e);updateProps(n,e.t,EMPTY_OBJ,r);for(var o=0,a=e.n.length;o<a;o++)n.appendChild(createElement(e.n[o],t,r));return n}function patch(e,t,r,n,o){var a=[];if(n===r);else if(r!=NULL&&isTextNode(r)&&isTextNode(n)&&r!=n)t.data=n;else if(r==NULL)t=e.insertBefore(createElement(n,a,o),t);else if(n.e.render){if(isNew(r.t,n.t)){var i=r.e,s=clone(i.t,n.t);i.setState({},s)}}else if(n.e&&n.e===r.e){o=o||"svg"==n.e,updateProps(t,r.t,n.t,o);for(var f=n.n.length,l=r.n.length,c={},v=[],u={},d=0;d<l;d++){var p=t.childNodes[d];v[d]=p;var N=r.n[d],L=getKey(N);NULL!=L&&(c[L]=[p,N])}for(var m=0,h=0;h<f;){var y=v[m],g=r.n[m],E=n.n[h],T=getKey(g);if(u[T])m++;else{var U=getKey(E),x=c[U]||[];NULL==U?(NULL==T&&(patch(t,y,g,E,o),h++),m++):(T===U?(patch(t,x[0],x[1],E,o),m++):x[0]?(t.insertBefore(x[0],y),patch(t,x[0],x[1],E,o)):patch(t,y,NULL,E,o),h++,u[U]=E)}}for(;m<l;){var P=r.n[m],C=getKey(P);NULL==C&&removeElement$1(t,v[m],P),m++}for(var S in c){var A=c[S],O=A[1];u[O.t.key]||removeElement$1(t,A[0],O)}}else if(n!==r){var _=t;e.replaceChild(t=createElement(n,a,o),_)}for(;a.length;)a.pop()();return t}function render(e,t,r){element=patch(t,element,oldNode,oldNode=e),r&&r()}function createRef(){return{}}exports.h=h,exports.render=render,exports.createRef=createRef;
