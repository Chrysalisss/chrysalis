/**
 * Chrysalis v1.0.0-β
 * Casper Søkol, 2019
 * Distributed under the MIT license
 */

Object.defineProperty(exports,"__esModule",{value:!0});var className="className",CLASS="class",doc=document,NULL=null,EMPTY_OBJ={},FUNCTION="function";function merge(e,t){for(var r in t)e[r]=t[r];return e}function shouldUpdate(e,t){for(var r in e)if(e[r]!==t[r])return!0;for(var r in t)if(e[r]!==t[r])return!0}function isTextNode(e){return"object"!=typeof e}function getKey(e){if(e&&(e=e.t))return e.key}function removeElement$1(e,t,r){r.onremove&&r.onremove(),e.removeChild(t),r.ondestroy&&r.ondestroy()}function h(e,t){for(var r,n=[],o=[],a=arguments.length;a-- >2;)n.push(arguments[a]);for(;n.length>0;)if(Array.isArray(r=n.pop()))for(var s=r.length;s-- >0;)n.push(r[s]);else!1===r||!0===r||r==NULL||o.push(r);return t=t||{},typeof e==FUNCTION?(t.n=o,e(t)):{e:e,t:t,n:o}}function createRef(){return{}}var element,oldNode,refs={};function eventListener(e){return e.currentTarget.events[e.e](e)}function updateProps(e,t,r,n){for(var o in merge(t,r)){var a=t[o],s=r[o];if("key"==(o=n?o==className?CLASS:o:o==CLASS?className:o));else if("style"==o)for(var i in merge(a,s))(a||EMPTY_OBJ)[i]==(s||EMPTY_OBJ)[i]||e.style.setProperty("-"==i[0]&&"-"==i[1]?i:i.replace(/[A-Z]/g,"-$&"),a&&i in a?"number"==typeof a[i]?a[i]+"px":a[i]:"");else"o"===o[0]&&"n"===o[1]?((e.events||(e.events={}))[o=o.slice(2).toLowerCase()]=a)?s||e.addEventListener(o,eventListener):e.removeEventListener(o,eventListener):"ref"==o?"string"==typeof a?refs[a]=e:typeof a==FUNCTION?a(e):a.current=e:"dangerouslySetInnerHTML"==o?e.innerHTML=a.__html:!n&&"list"!=o&&o in e?e[o]=a==NULL?"":a:a==NULL||!1===a?e.removeAttribute(o):e.setAttribute(o,a)}}function createElement(e,t,r){if(""==e.e&&(e=e.n[0]),isTextNode(e))return doc.createTextNode(e);if(e.e.render)return e.e.oncreate&&t.push(e.e.oncreate),e.t.n=e.n,o(e.e,e.t),e.e.oninit&&e.e.oninit(),e.e.k;var n=(r=r||"svg"==e.e)?doc.createElementNS("http://www.w3.org/2000/svg",e.e):doc.createElement(e.e);updateProps(n,e.t,EMPTY_OBJ,r);for(var o=0,a=e.n.length;o<a;o++)n.appendChild(createElement(e.n[o],t,r));return n}function patch(e,t,r,n,o){var a=[];if(n===r);else if(r!=NULL&&isTextNode(r)&&isTextNode(n)&&r!=n)t.data=n;else if(r==NULL)t=e.insertBefore(createElement(n,a,o),t);else if(n.e.render){if(shouldUpdate(r.t,n.t)){var s=r.e;merge(s.t,n.t),s.w?s.setState(s.w(s.t)):s.f()}}else if(n.e&&n.e===r.e){o=o||"svg"==n.e,updateProps(t,r.t,n.t,o);for(var i=n.n.length,f=r.n.length,l={},c=[],u={},v=0;v<f;v++){var d=t.childNodes[v];c[v]=d;var p=r.n[v],L=getKey(p);NULL!=L&&(l[L]=[d,p])}for(var m=0,N=0;N<i;){var h=c[m],g=r.n[m],y=n.n[N],U=getKey(g);if(u[U])m++;else{var E=getKey(y),T=l[E]||[];NULL==E?(NULL==U&&(patch(t,h,g,y,o),N++),m++):(U===E?(patch(t,T[0],T[1],y,o),m++):T[0]?(t.insertBefore(T[0],h),patch(t,T[0],T[1],y,o)):patch(t,h,NULL,y,o),N++,u[E]=y)}}for(;m<f;){var x=r.n[m],C=getKey(x);NULL==C&&removeElement$1(t,c[m],x),m++}for(var P in l){var S=l[P],A=S[1];u[A.t.key]||removeElement$1(t,S[0],A)}}else if(n!==r){var O=t;e.replaceChild(t=createElement(n,a,o),O)}for(;a.length;)a.pop()();return t}function render(e,t,r){element=patch(t,element,oldNode,oldNode=e),r&&r()}exports.h=h,exports.render=render,exports.createRef=createRef,exports.refs=refs;
